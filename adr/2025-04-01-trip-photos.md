# Публиковать для посетителей сайта снятые в поездках фотографии

## Контекст

Для использования фотографий на страницах сайта они должны быть куда-то загружены и быть доступны по прямой ссылке.

Фотографии слишком большого размера для публикации в исходном виде.

## Решение

Загружать фотографии на отдельный сервер, чтобы сайт не зависел от его доступности. Это позволит заменять и модернизировать сервер, на котором размещен сайт.

Уменьшать фотографии до размера 2000 пикселей по большей стороне. Для 4 на 3 это будет 2000 на 1500 пикселей. 2000 — это двойная ширина контейнера с текстом истории о поездке, чтобы на устройствах с повышенной плотностью пикселей фото выглядели качественно. Для устройств с меньшей плотностью пикселей предложить миниатюру до 1000 пикселей по большей стороне.

Исходники не хранить на сервере в угоду экономии места и снижения счета за хостинг, в том числе счета за резервные копии.

Слегка уменьшать качество фотографий в угоду конечному размеру файлов, чтобы меньше тратить трафик пользователей. Чтобы можно было публиковать более сотни фотографий на одной странице.

Создавать миниатюры фотографий для использования на небольших экранах и когда нужно показать много снимков бок о бок.

## Статус

Реализовано.

## Последствия

## Формат фотографий

Выбран JPEG. Качество 75. Распространен и понятен.

WEBP слишком сильно сглаживает, размывая детали. Качество нужно ставить хотя бы 85, но тогда размер толком не отличается от JPEG.

JXL теряет Color Profile — меняются цвета на фотографии. Не было смысла тестировать дальше.

### Исходник в HEIC или исходник в JPEG

JPEG source:

- JPEG 576177
- JXL 403191
- WEBP 644938

HEIC source:

- JPEG 592043
- JXL 418417
- WEBP 660804
